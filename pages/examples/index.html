<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>示例代码 - ArkTS学习网站</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link href="http://cdn.bytedance.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <h1>ArkTS学习</h1>
            </div>
            <div class="nav-links">
                <a href="../../index.html">首页</a>
                <a href="../basic/index.html">基础教程</a>
                <a href="../advanced/index.html">进阶教程</a>
                <a href="#" class="active">示例代码</a>
                <a href="../practice/index.html">在线练习</a>
            </div>
            <button class="theme-toggle">
                <i class="fa fa-moon-o"></i>
            </button>
        </nav>
    </header>

    <main class="main tutorial-content">
        <div class="sidebar">
            <h3>示例分类</h3>
            <ul class="tutorial-menu">
                <li><a href="#basic-components" class="active">基础组件示例</a></li>
                <li><a href="#layout-examples">布局示例</a></li>
                <li><a href="#interaction-examples">交互示例</a></li>
                <li><a href="#animation-examples">动画示例</a></li>
                <li><a href="#project-examples">项目实战</a></li>
            </ul>
        </div>

        <div class="content">
            <section id="basic-components" class="tutorial-section">
                <h2>基础组件示例</h2>
                <p>展示ArkTS常用基础组件的使用方法和最佳实践。</p>

                <div class="example-grid">
                    <div class="example-card"> 
                        <h3>按钮组件</h3>
                        <div class="example-preview">
                            <img src="../../assets/images/examples/button.png" alt="按钮示例">
                        </div>
                        <div class="code-example">
                            <pre><code>@Component
struct ButtonExample {
    build() {
        Column({ space: 20 }) {
            Button('默认按钮')
                .width('80%')
                .height(40)
                
            Button('主要按钮')
                .width('80%')
                .height(40)
                .backgroundColor('#0A59F7')
                
            Button('圆角按钮')
                .width('80%')
                .height(40)
                .borderRadius(20)
        }
        .width('100%')
        .padding(20)
    }
}</code></pre>
                        </div>
                        <div class="example-actions">
                            <button class="btn secondary">查看完整代码</button>
                        </div>
                    </div>

                    <div class="example-card">
                        <h3>输入组件</h3>
                        <div class="example-preview">
                            <img src="../../assets/images/examples/input.png" alt="输入示例">
                        </div>
                        <div class="code-example">
                            <pre><code>@Component
struct InputExample {
    @State text: string = ''
    
    build() {
        Column({ space: 20 }) {
            TextInput({ placeholder: '请输入内容' })
                .width('80%')
                .height(40)
                .onChange((value: string) => {
                    this.text = value
                })
                
            Text(`输入内容：${this.text}`)
                .fontSize(16)
        }
        .width('100%')
        .padding(20)
    }
}</code></pre>
                        </div>
                        <div class="example-actions">
                            <button class="btn secondary">查看完整代码</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="layout-examples" class="tutorial-section">
                <h2>布局示例</h2>
                <p>展示ArkTS中常用的布局方式和响应式设计实现。</p>

                <div class="example-grid">
                    <div class="example-card">
                        <h3>Flex布局</h3>
                        <div class="example-preview">
                            <img src="../../assets/images/examples/flex.png" alt="Flex布局示例">
                        </div>
                        <div class="code-example">
                            <pre><code>@Component
struct FlexLayoutExample {
    build() {
        Flex({
            direction: FlexDirection.Row,
            wrap: FlexWrap.Wrap,
            justifyContent: FlexAlign.SpaceAround
        }) {
            ForEach([1, 2, 3, 4], (item) => {
                Column()
                    .width(100)
                    .height(100)
                    .backgroundColor('#0A59F7')
                    .margin(10)
            })
        }
        .width('100%')
        .padding(20)
    }
}</code></pre>
                        </div>
                        <div class="example-actions">
                            <button class="btn secondary">查看完整代码</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="interaction-examples" class="tutorial-section">
                <h2>交互示例</h2>
                <p>展示用户交互相关的功能实现，如手势识别、事件处理等。</p>

                <div class="example-grid">
                    <div class="example-card">
                        <h3>手势识别</h3>
                        <div class="example-preview">
                            <img src="../../assets/images/examples/gesture.png" alt="手势识别示例">
                        </div>
                        <div class="code-example">
                            <pre><code>@Component
struct GestureExample {
    @State rotation: number = 0
    
    build() {
        Column() {
            Image($r('app.media.logo'))
                .width(200)
                .height(200)
                .rotate({ angle: this.rotation })
                .gesture(
                    PanGesture()
                        .onActionUpdate((event: GestureEvent) => {
                            this.rotation += event.angle
                        })
                )
        }
        .width('100%')
        .height('100%')
        .justifyContent(FlexAlign.Center)
    }
}</code></pre>
                        </div>
                        <div class="example-actions">
                            <button class="btn secondary">查看完整代码</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="animation-examples" class="tutorial-section">
                <h2>动画示例</h2>
                <p>展示各种动画效果的实现方式。</p>

                <div class="example-grid">
                    <div class="example-card">
                        <h3>过渡动画</h3>
                        <div class="example-preview">
                            <img src="../../assets/images/examples/animation.png" alt="动画示例">
                        </div>
                        <div class="code-example">
                            <pre><code>@Component
struct TransitionExample {
    @State isExpanded: boolean = false
    
    build() {
        Column() {
            Button('点击展开')
                .onClick(() => {
                    animateTo({ duration: 500 }, () => {
                        this.isExpanded = !this.isExpanded
                    })
                })
            
            Column()
                .width('100%')
                .height(this.isExpanded ? 200 : 0)
                .backgroundColor('#0A59F7')
                .transition('height')
        }
        .padding(20)
    }
}</code></pre>
                        </div>
                        <div class="example-actions">
                            <button class="btn secondary">查看完整代码</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="project-examples" class="tutorial-section">
                <h2>项目实战</h2>
                <p>完整的项目示例，展示实际应用中的最佳实践。</p>

                <div class="example-grid">
                    <div class="example-card full-width">
                        <h3>待办事项应用</h3>
                        <div class="example-preview">
                            <img src="../../assets/images/examples/todo.png" alt="待办事项应用">
                        </div>
                        <div class="project-description">
                            <h4>功能特点</h4>
                            <ul>
                                <li>任务的添加、删除和编辑</li>
                                <li>任务状态管理（待处理、进行中、已完成）</li>
                                <li>任务优先级设置</li>
                                <li>任务分类管理</li>
                                <li>数据持久化存储</li>
                                <li>任务统计和进度展示</li>
                            </ul>
                            
                            <h4>技术要点</h4>
                            <ul>
                                <li>状态管理：使用@State装饰器管理组件状态</li>
                                <li>数据持久化：使用首选项存储任务数据</li>
                                <li>组件复用：封装通用的任务项组件</li>
                                <li>动画效果：实现平滑的状态切换动画</li>
                            </ul>
                        </div>
                        <div class="code-example">
                            <pre><code>// 任务数据模型
class TodoItem {
    id: number
    title: string
    status: 'pending' | 'inProgress' | 'completed'
    priority: 'low' | 'medium' | 'high'
    createTime: number

    constructor(title: string) {
        this.id = Date.now()
        this.title = title
        this.status = 'pending'
        this.priority = 'medium'
        this.createTime = Date.now()
    }
}

// 任务项组件
@Component
struct TodoItemComponent {
    @ObjectLink item: TodoItem
    @Link onStatusChange: (id: number, status: string) => void
    @Link onDelete: (id: number) => void

    build() {
        Row() {
            Row({ space: 10 }) {
                Checkbox()
                    .select(this.item.status === 'completed')
                    .onChange((value) => {
                        this.onStatusChange(this.item.id, 
                            value ? 'completed' : 'pending')
                    })
                
                Text(this.item.title)
                    .fontSize(16)
                    .decoration({ type: this.item.status === 'completed' ? 
                        TextDecorationType.LineThrough : TextDecorationType.None })
            }
            .layoutWeight(1)

            Image($r('app.media.delete'))
                .width(24)
                .height(24)
                .onClick(() => this.onDelete(this.item.id))
        }
        .width('100%')
        .height(50)
        .padding(10)
        .backgroundColor(Color.White)
        .borderRadius(8)
    }
}

// 主页面组件
@Component
struct TodoListPage {
    @State todoItems: TodoItem[] = []
    @State newTaskTitle: string = ''

    aboutToAppear() {
        // 从持久化存储加载数据
        this.loadTodoItems()
    }

    async loadTodoItems() {
        try {
            const storage = await preferences.getPreferences(globalThis.context, 'todo_storage')
            const items = await storage.get('items', '[]')
            this.todoItems = JSON.parse(items)
        } catch (err) {
            console.error('Failed to load todo items:', err)
        }
    }

    async saveTodoItems() {
        try {
            const storage = await preferences.getPreferences(globalThis.context, 'todo_storage')
            await storage.put('items', JSON.stringify(this.todoItems))
            await storage.flush()
        } catch (err) {
            console.error('Failed to save todo items:', err)
        }
    }

    build() {
        Column() {
            // 顶部标题
            Text('待办事项')
                .fontSize(24)
                .fontWeight(FontWeight.Bold)
                .margin({ top: 20, bottom: 20 })

            // 添加任务输入框
            Row({ space: 10 }) {
                TextInput({ placeholder: '添加新任务...' })
                    .width('80%')
                    .height(40)
                    .onChange((value) => {
                        this.newTaskTitle = value
                    })

                Button('+')
                    .width(40)
                    .height(40)
                    .onClick(() => {
                        if (this.newTaskTitle.trim()) {
                            this.todoItems.push(new TodoItem(this.newTaskTitle))
                            this.newTaskTitle = ''
                            this.saveTodoItems()
                        }
                    })
            }
            .padding(10)
            .width('100%')

            // 任务列表
            List() {
                ForEach(this.todoItems, (item) => {
                    ListItem() {
                        TodoItemComponent({
                            item: item,
                            onStatusChange: (id, status) => {
                                const index = this.todoItems.findIndex(item => item.id === id)
                                if (index !== -1) {
                                    this.todoItems[index].status = status
                                    this.saveTodoItems()
                                }
                            },
                            onDelete: (id) => {
                                this.todoItems = this.todoItems.filter(item => item.id !== id)
                                this.saveTodoItems()
                            }
                        })
                    }
                    .margin({ bottom: 10 })
                })
            }
            .width('100%')
            .layoutWeight(1)
            .padding(10)

            // 底部统计
            Row() {
                Text(`总计: ${this.todoItems.length}`)
                Text(`已完成: ${this.todoItems.filter(item => 
                    item.status === 'completed').length}`)
                Text(`待处理: ${this.todoItems.filter(item => 
                    item.status === 'pending').length}`)
            }
            .width('100%')
            .justifyContent(FlexAlign.SpaceAround)
            .padding(10)
            .backgroundColor('#f5f5f5')
        }
        .width('100%')
        .height('100%')
        .backgroundColor('#f0f0f0')
    }
}</code></pre>
                        </div>
                        <div class="example-actions">
                            <button class="btn secondary" onclick="window.open('https://github.com/your-repo/todo-demo', '_blank')">查看完整代码</button>
                            <button class="btn primary" onclick="showDemo('todo')">查看演示</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- 添加演示模态框 -->
    <div id="demoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>演示效果</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <iframe id="demoFrame" width="100%" height="600px" frameborder="0"></iframe>
            </div>
        </div>
    </div>

    <style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
        background-color: var(--background-color);
        margin: 5% auto;
        padding: 20px;
        border-radius: 8px;
        width: 80%;
        max-width: 800px;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .close {
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        color: var(--text-color);
    }

    .close:hover {
        color: var(--primary-color);
    }
    </style>

    <script>
    // 演示功能相关代码
    const modal = document.getElementById('demoModal');
    const closeBtn = document.querySelector('.close');
    const demoFrame = document.getElementById('demoFrame');

    // 显示演示
    function showDemo(demoType) {
        modal.style.display = 'block';
        switch(demoType) {
            case 'todo':
                // 加载待办事项演示
                demoFrame.src = '../demos/todo.html';
                break;
            // 可以添加其他演示类型
        }
    }

    // 关闭模态框
    closeBtn.onclick = function() {
        modal.style.display = 'none';
        demoFrame.src = '';
    }

    // 点击模态框外部关闭
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = 'none';
            demoFrame.src = '';
        }
    }
    </script>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>关于我们</h3>
                <p>致力于为开发者提供优质的ArkTS学习资源</p>
            </div>
            <div class="footer-section">
                <h3>快速链接</h3>
                <a href="../../index.html">首页</a>
                <a href="../basic/index.html">基础教程</a>
                <a href="../advanced/index.html">进阶教程</a>
            </div>
            <div class="footer-section">
                <h3>联系我们</h3>
                <p>邮箱：contact@arkts-learning.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 ArkTS学习网站. All rights reserved.</p>
        </div>
    </footer>

    <script src="../../assets/js/main.js"></script>
</body>
</html> 